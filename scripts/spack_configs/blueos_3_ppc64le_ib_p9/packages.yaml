packages:
  all:
    compiler: [gcc, clang]
    providers:
      mpi: [spectrum-mpi]
      blas: [netlib-lapack]
      lapack: [netlib-lapack]

  spectrum-mpi:
    buildable: False
    externals:
      - spec: spectrum-mpi@10.3.1.03rtm0 %gcc@8.3.1
        prefix: /usr/tce/packages/spectrum-mpi/spectrum-mpi-rolling-release-gcc-8.3.1/
      # Previously clang@upstream - clingo doesn't like "upstream" version
      - spec: spectrum-mpi@10.3.1.03rtm0%clang@9.0.0
        prefix: /usr/tce/packages/spectrum-mpi/spectrum-mpi-rolling-release-clang-upstream-2019.03.26
      - spec: spectrum-mpi@10.3.1.03rtm0 %clang@10.0.1
        prefix: /usr/tce/packages/spectrum-mpi/spectrum-mpi-rolling-release-clang-ibm-10.0.1-gcc-8.3.1/
      - spec: spectrum-mpi@10.3.1.03rtm0 %clang@11.0.1
        prefix: /usr/tce/packages/spectrum-mpi/spectrum-mpi-rolling-release-clang-ibm-11.0.1/

  # Essl not currently working with spack
  # Lock down blas, lapack implementation
  # essl:
  #   buildable: False
  #   externals:
  #     - spec: essl@6.2.1 ~ilp64 threads=openmp +cuda
  #       prefix: /usr/tcetmp/packages/essl/essl-6.2.1/

  cuda:
    buildable: False
    externals:
    - spec: cuda@11.0.2 +allow-unsupported-compilers
      prefix: /usr/tce/packages/cuda/cuda-11.0.2

  # System level packages to not build
  cmake:
    buildable: False
    externals:
    - spec: cmake@3.21.1
      prefix: /usr/tce/packages/cmake/cmake-3.21.1
  readline:
    buildable: False
    externals:
      - spec: readline@7.0
        prefix: /collab/usr/gapps/python/build/spack-coralea.3/opt/spack/linux-rhel7-ppc64le/gcc-4.9.3/readline-7.0-owal6z2zh5zotgvdmwow6sgdn6cqfn43/
  zlib:
    buildable: False
    externals:
      - spec: zlib@1.2.7
        prefix: /usr/
  m4:
    buildable: False
    externals:
      - spec: m4@1.4.16
        prefix: /usr
  perl:
    buildable: false
    externals:
    - spec: perl@5.16.3
      prefix: /usr
  pkg-config:
    buildable: false
    externals:
    - spec: pkg-config@0.27.1
      prefix: /usr
  diffutils:
    buildable: False
    externals:
      - spec: diffutils@3.3
        prefix: /usr/bin/
  python:
    buildable: False
    externals:
    - spec: python@3.8.2
      prefix: /usr/tce/packages/python/python-3.8.2/
  autoconf:
    buildable: False
    externals:
      - spec: autoconf@2.69
        prefix: /usr
  automake:
    buildable: False
    externals:
      - spec: automake@1.13.4
        prefix: /usr
  libtool:
    buildable: False
    externals:
      - spec: libtool@2.4.2
        prefix: /usr
  bison:
    buildable: False
    externals:
      - spec: bison@3.0.4
        prefix: /usr
  flex:
    buildable: False
    externals:
      - spec: flex@2.5.37
        prefix: /usr
