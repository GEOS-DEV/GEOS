geos:
  input_file_version: 0.0.1
  allow_keyword_forwarding: false

mesh:
  vtk:
    file_name: test.vtm
    regions:
      block_name: main
      attribute: marker
      mapping:
        reservoir: 0
        overburden: 1
        underburden: 2
    fractures:
      block_name: fracture


simulation:
  begin: 0
  end: 2 s
  solver:
    laplace:
      formulation:
        variable:
          name: temperature
          functional_space: h1
          fe_order: 1
  numerical_strategies:
    time_integration: steady_state
    coupling_strategies: FIM / SIM / SE
      ....
    linear_solver:
      - params: ...
    non_linear_solvers:
      - params: ...

simulation:
  begin: 0
  end: 2 s
  solvers:
    - laplace:
        name: laplace1
        on: [domain1, domain3]
        formulation:
          method: FE
          order: 1
          variable:
            name: temperature
            functional_space: h1
    - laplace:
        name: laplace2
        on: domain2
        formulation:
          variable:
            name: temperature
            functional_space: h1
            fe_order: 2
  numerical_strategies:
    time_integration: steady_state
    coupling_strategies:
      type: SIM
      order:
        - laplace1:
            linear_solver:
              params: ...
            non_linear_solvers:
              - params: ...
        - laplace2:
            linear_solver:
              params: ...
            non_linear_solvers:
              - params: ...

  numerical_strategies:
    time_integration: steady_state
    coupling_strategies:
      type: FIM
      linear_solver:
        params: ...
      non_linear_solvers:
        - params: ...

solvers:
  - laplace:
      on:
        - reservoir
      formulation:
        - variable:
            name: temperature
            functional_space: l2
            fe_order: 0
  - laplace:
      on:
        - overburden
      formulation:
        - variable:
            name: temperature
            functional_space: h1
            fe_order: 1

num_strategies:
  linear_solver:
    type: serial_direct
  non_linear_solver:
    type: 'direct


solver:-
  laplace:
    formulation:
      - variable:
          name: temperature
          functional_space: l2
          fv_order: 0
          numerical_flux_approximation: tpfa

solver:
  laplace:
    formulation:
      - variable:
          name: temperature
          functional_space: h1
          ve_order: 1

solver:
  laplace:
    formulation:
      variable:
        name: temperature
        functional_space: l2
        fe_order: 0
      flux:
        name: heat_flux
        functional_space: h(div)
        rt_order: 0

solver:
  compositional:
    formulation:
      pressure:
        functional_space: h1
        fe_order: 1
      component_densities:
        num: 2
        functional_space: h1
        fe_order: 1

solvers:
  - type: linear_elasticity
    params: ...
  - type: single_phase_flow
    params: ...
  - type: laplace
    params: ...

solver:
  single_phase_poromechanics:
#    linear_momentum_balance:
      formulation:
        - displacement:
            functional_space: h1
            fe_order: 1
        - pressure:
            functional_space: h1
            fe_order: 1
        - pressure_bis:
            functional_space: l2
            fv_order: 0
            numerical_flux_approximation: tpfa
#    mass_balance:
#      displacement:
#        fe_space: h1
#        fe_order: 1
    time_integration: backward_euler
    linear_solvers:
      - params: ...
    non_linear_solvers:
      - params: ...

#mesh:
#  internal:
#    element_type: hexahedra
#    x_range: [ 0, 1 ]
#    y_range: [ 0, 1 ]
#    z_range: [ 0, 1 ]
#    nx: [ 10 ]
#    ny: [ 10 ]
#    nz: [ 10 ]
#    regions:
#      mapping:
#        reservoir: [
#          [0, 0, 0],
#          [1, 0, 0],
#        ]
#        overburden:  [
#          [2, 0, 0],
#        ]

boundary_conditions:
  - all:
      - field: pressure
        value: 0.
      - field: temperature
        vtk_field: my_temp
      - field: displacement
        value: [0, 0, 0]
  - xneg:
      - field: pressure
        value: 0.
      - field: temperature
        vtk_field: my_temp
      - field: displacement
        value: [0, 0, 0]


initial_conditions:
  - regions/reservoir:
      - field: pressure
        value: 0.
      - field: temperature
        vtk_field: my_temp
      - field: displacement
        value: [0, 0, 0]
  - regions/overburden:
      - field: temperature
        value: 0
  - regions/underburden:
      - field: temperature
        table_path: filename.txt
  - regions/{overburden, underburden}:
      - field: temperature
        value: 0
  - regions/*:
      - field: displacement
        value: [1, 1, 1]

#initial_conditions:
#  - pressure:
#      location: regions/reservoir
#      value: 0.
#  - stress:
#      location: regions/reservoir
#      vtk_field: my_pressure
#  - displacement:
#      location: regions/overburden
#      table_path: filename.txt
#  - temperature:
#      location: regions/overburden
#      gradient:
#        x: 1
#        y: 2

simulation:
  begin: 0
  end: 1   s

outputs:
  - vtk:
      every: 1 y
      fields: [pressure, stress]
      write_ghost_cells: true
      file_root: annual
  - vtk:
      at: [1, 2]
      fields: [pressure, displacement]
      write_ghost_cells: true
  - restart:
      at: [1 s, 2 s, 3 d]
      every: 1 min
  - restart:
      at: [4, 5, 6]
  - collect:
      fields: [pressure]
      every: 1 timestep
